<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test des Fonctionnalit√©s - Quantum Quiz</title>
    <link rel="stylesheet" href="css/main.css">
    <style>
        body {
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .test-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .test-container h2 {
            color: var(--quantum-cyan);
            margin-top: 0;
        }

        .test-section {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--bg-primary);
            border-radius: 8px;
        }

        .test-button {
            background: var(--quantum-purple);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem 0.5rem 0.5rem 0;
            transition: all 0.3s;
        }

        .test-button:hover {
            background: var(--quantum-pink);
            transform: translateY(-2px);
        }

        .test-button.danger {
            background: #ef4444;
        }

        .test-result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .test-result.success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid #22c55e;
            color: #4ade80;
        }

        .test-result.error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid #ef4444;
            color: #f87171;
        }

        .test-result.info {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid #3b82f6;
            color: #60a5fa;
        }

        .code-block {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-badge.success {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
        }

        .status-badge.error {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        .nav-preview {
            background: var(--bg-primary);
            border: 2px dashed var(--quantum-cyan);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
        }

        h1 {
            background: linear-gradient(135deg, var(--quantum-cyan) 0%, var(--quantum-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
        }

        .links-section {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .links-section a {
            flex: 1;
            min-width: 200px;
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text-primary);
            text-align: center;
            transition: all 0.3s;
        }

        .links-section a:hover {
            background: var(--quantum-purple);
            color: white;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <h1>üß™ Test des Nouvelles Fonctionnalit√©s</h1>

    <!-- Test 1: Navigation -->
    <div class="test-container">
        <h2>‚úÖ Test 1 : Navigation</h2>
        <p>La navigation devrait appara√Ætre automatiquement sur cette page.</p>

        <div class="nav-preview">
            <p><strong>‚òùÔ∏è Regardez en haut de la page !</strong></p>
            <p>Vous devriez voir une barre de navigation avec :</p>
            <p>üè† Accueil | üë§ Profil | üèÜ Classement | ‚öîÔ∏è D√©fis | üé¨ Animations | ‚ÑπÔ∏è √Ä propos</p>
        </div>

        <div class="test-section">
            <h3>V√©rifications :</h3>
            <button class="test-button" onclick="checkNavigation()">V√©rifier la Navigation</button>
            <div id="nav-result"></div>
        </div>
    </div>

    <!-- Test 2: Profile Guard -->
    <div class="test-container">
        <h2>üîí Test 2 : Profil Obligatoire</h2>
        <p>Testez le syst√®me de v√©rification de profil.</p>

        <div class="test-section">
            <h3>√âtat Actuel du Profil :</h3>
            <div id="profile-status"></div>

            <h3>Actions :</h3>
            <button class="test-button" onclick="checkProfile()">V√©rifier le Profil</button>
            <button class="test-button danger" onclick="deleteProfile()">Supprimer le Profil</button>
            <button class="test-button" onclick="createTestProfile()">Cr√©er un Profil de Test</button>

            <div id="profile-result"></div>
        </div>

        <div class="test-section">
            <h3>Test de Redirection :</h3>
            <p>Si vous supprimez votre profil et essayez d'acc√©der √† une page prot√©g√©e, vous serez redirig√© vers la cr√©ation de profil.</p>
            <button class="test-button" onclick="testRedirection()">Tester la Redirection</button>
            <div id="redirect-result"></div>
        </div>
    </div>

    <!-- Test 3: Toutes les Pages -->
    <div class="test-container">
        <h2>üîó Test 3 : Accessibilit√© des Pages</h2>
        <p>Testez tous les liens de navigation.</p>

        <div class="links-section">
            <a href="index.html" target="_blank">üè† Accueil</a>
            <a href="profile.html" target="_blank">üë§ Profil</a>
            <a href="leaderboard.html" target="_blank">üèÜ Classement</a>
            <a href="challenges.html" target="_blank">‚öîÔ∏è D√©fis</a>
            <a href="animations-demo.html" target="_blank">üé¨ Animations</a>
            <a href="about.html" target="_blank">‚ÑπÔ∏è √Ä propos</a>
        </div>
    </div>

    <!-- D√©tails Techniques -->
    <div class="test-container">
        <h2>üîß D√©tails Techniques</h2>

        <div class="test-section">
            <h3>Modules Charg√©s :</h3>
            <div id="modules-status"></div>
        </div>

        <div class="test-section">
            <h3>localStorage Actuel :</h3>
            <button class="test-button" onclick="showLocalStorage()">Voir le localStorage</button>
            <div id="storage-result"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/navigation.js"></script>
    <script src="js/profile-guard.js"></script>

    <script>
        // D√©sactiver le profile guard pour cette page de test
        if (window.ProfileGuard) {
            window.ProfileGuard.checkProfile = () => {
                console.log('‚úÖ Profile guard d√©sactiv√© pour la page de test');
            };
        }

        // Test 1: V√©rifier la navigation
        function checkNavigation() {
            const result = document.getElementById('nav-result');
            const header = document.querySelector('.main-header');
            const navLinks = document.querySelectorAll('.main-nav a');

            let html = '<div class="test-result">';

            if (header) {
                html += '<div class="test-result success">‚úÖ Header trouv√©</div>';
            } else {
                html += '<div class="test-result error">‚ùå Header non trouv√©</div>';
            }

            if (navLinks.length > 0) {
                html += '<div class="test-result success">‚úÖ ' + navLinks.length + ' liens de navigation trouv√©s</div>';
                html += '<div class="test-result info">Liens : ';
                navLinks.forEach(link => {
                    html += link.textContent + ' | ';
                });
                html += '</div>';
            } else {
                html += '<div class="test-result error">‚ùå Aucun lien de navigation</div>';
            }

            html += '</div>';
            result.innerHTML = html;
        }

        // Test 2: V√©rifier le profil
        function checkProfile() {
            const result = document.getElementById('profile-result');
            const profileData = localStorage.getItem('quantum-quiz-user-profile');

            if (profileData) {
                const profile = JSON.parse(profileData);
                result.innerHTML = `
                    <div class="test-result success">
                        ‚úÖ Profil trouv√©<br>
                        üë§ Nom : ${profile.username}<br>
                        üèÖ Niveau : ${profile.level}<br>
                        ‚≠ê XP : ${profile.xp}<br>
                        üìä Quiz compl√©t√©s : ${profile.stats.quizzesCompleted}
                    </div>
                `;
            } else {
                result.innerHTML = '<div class="test-result error">‚ùå Aucun profil trouv√©</div>';
            }
        }

        // Supprimer le profil
        function deleteProfile() {
            localStorage.removeItem('quantum-quiz-user-profile');
            document.getElementById('profile-result').innerHTML =
                '<div class="test-result info">üóëÔ∏è Profil supprim√©</div>';
            updateProfileStatus();
        }

        // Cr√©er un profil de test
        function createTestProfile() {
            const testProfile = {
                username: 'Testeur_' + Math.floor(Math.random() * 1000),
                userId: 'test_' + Date.now(),
                level: 1,
                xp: 0,
                stats: {
                    quizzesCompleted: 0,
                    totalQuestions: 0,
                    correctAnswers: 0,
                    accuracy: 0
                },
                achievements: [],
                createdAt: new Date().toISOString()
            };

            localStorage.setItem('quantum-quiz-user-profile', JSON.stringify(testProfile));
            document.getElementById('profile-result').innerHTML =
                `<div class="test-result success">‚úÖ Profil de test cr√©√© : ${testProfile.username}</div>`;
            updateProfileStatus();
        }

        // Tester la redirection
        function testRedirection() {
            const result = document.getElementById('redirect-result');
            const hasProfile = localStorage.getItem('quantum-quiz-user-profile');

            if (hasProfile) {
                result.innerHTML = `
                    <div class="test-result info">
                        ‚ÑπÔ∏è Vous avez un profil. Supprimez-le d'abord pour tester la redirection.<br><br>
                        Ensuite, essayez d'ouvrir : <a href="index.html" target="_blank">index.html</a>
                    </div>
                `;
            } else {
                result.innerHTML = `
                    <div class="test-result success">
                        ‚úÖ Pas de profil d√©tect√©.<br><br>
                        Cliquez sur ce lien pour tester : <a href="index.html">Accueil</a><br>
                        ‚Üí Vous devriez √™tre redirig√© vers profile.html
                    </div>
                `;
            }
        }

        // Mettre √† jour le statut du profil
        function updateProfileStatus() {
            const statusDiv = document.getElementById('profile-status');
            const profileData = localStorage.getItem('quantum-quiz-user-profile');

            if (profileData) {
                const profile = JSON.parse(profileData);
                statusDiv.innerHTML = `
                    <span class="status-badge success">‚úÖ Profil actif</span>
                    <div class="code-block" style="margin-top: 1rem;">
                        <strong>Username:</strong> ${profile.username}<br>
                        <strong>Niveau:</strong> ${profile.level}<br>
                        <strong>XP:</strong> ${profile.xp}
                    </div>
                `;
            } else {
                statusDiv.innerHTML = '<span class="status-badge error">‚ùå Aucun profil</span>';
            }
        }

        // Afficher localStorage
        function showLocalStorage() {
            const result = document.getElementById('storage-result');
            const keys = Object.keys(localStorage).filter(k => k.startsWith('quantum-quiz'));

            if (keys.length === 0) {
                result.innerHTML = '<div class="test-result info">‚ÑπÔ∏è Aucune donn√©e Quantum Quiz dans localStorage</div>';
                return;
            }

            let html = '<div class="test-result info">';
            keys.forEach(key => {
                const value = localStorage.getItem(key);
                let displayValue = value;

                if (value.length > 100) {
                    displayValue = value.substring(0, 100) + '...';
                }

                html += `<div style="margin: 0.5rem 0;"><strong>${key}:</strong><br><code>${displayValue}</code></div>`;
            });
            html += '</div>';

            result.innerHTML = html;
        }

        // V√©rifier les modules
        function checkModules() {
            const statusDiv = document.getElementById('modules-status');
            let html = '<div class="code-block">';

            if (window.Navigation) {
                html += '‚úÖ navigation.js charg√©<br>';
            } else {
                html += '‚ùå navigation.js non charg√©<br>';
            }

            if (window.ProfileGuard) {
                html += '‚úÖ profile-guard.js charg√©<br>';
            } else {
                html += '‚ùå profile-guard.js non charg√©<br>';
            }

            html += '</div>';
            statusDiv.innerHTML = html;
        }

        // Initialisation
        window.addEventListener('DOMContentLoaded', () => {
            updateProfileStatus();
            checkModules();
            console.log('üß™ Page de test charg√©e');
            console.log('üì¶ Modules disponibles:', {
                Navigation: !!window.Navigation,
                ProfileGuard: !!window.ProfileGuard
            });
        });
    </script>
</body>
</html>
